{% extends 'base.html' %}
{% block title %}DashBoard{% endblock %}
{% load static %}

{% block content %}

    <div class="panel panel-default">
        <div class="table-responsives">
            <div id="example_wrapper" class="dataTables_wrapper form-inline dt-bootstrap">
                <div class="row">
                    <div class="col-sm-12">

                        <table id="dt-healthList" class="table table-striped table-bordered dataTable"
                               style="width: 100%;" role="grid" aria-describedby="example_info">
                            <thead>
                            <tr role="row">
                                <th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 320px;"
                                    aria-sort="ascending"
                                    aria-label="Name: activate to sort column descending">
                                    Device ID
                                </th>
                                <th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 320px;"
                                    aria-sort="ascending"
                                    aria-label="Name: activate to sort column descending">
                                    Username
                                </th>
                                <th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 320px;"
                                    aria-sort="ascending"
                                    aria-label="Name: activate to sort column descending">
                                    First Name
                                </th>
                                <th class="sorting_asc" tabindex="0" rowspan="1" colspan="1" style="width: 320px;"
                                    aria-sort="ascending"
                                    aria-label="Name: activate to sort column descending">
                                    Last Name
                                </th>
                                <th class="sorting" tabindex="0" rowspan="1" colspan="1" style="width: 320px;"
                                    aria-label="Position: activate to sort column ascending">
                                    Address
                                </th>
                                <th class="sorting" tabindex="0" rowspan="1" colspan="1" style="width: 320px;"
                                    aria-label="Position: activate to sort column ascending">
                                    Contact No.
                                </th>
                                <th class="sorting" tabindex="0" rowspan="1" colspan="1" style="width: 320px;"
                                    aria-label="Position: activate to sort column ascending">
                                    Email
                                </th>
                                <th class="sorting" tabindex="0" rowspan="1" colspan="1" style="width: 320px;"
                                    aria-label="Position: activate to sort column ascending">
                                    Age
                                </th>
                                <th class="sorting" tabindex="0" rowspan="1" colspan="1" style="width: 320px;"
                                    aria-label="Position: activate to sort column ascending">
                                    Gender
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for data in org_user %}
                                <tr>
                                    <td class="username">{{ data.device_id }}</td>
                                    <td class="username">{{ data.username }}</td>
                                    <td class="first_name">{{ data.first_name }}</td>
                                    <td class="last_name">{{ data.last_name }}</td>
                                    <td class="address">{{ data.address }}</td>
                                    <td class="contact_no">{{ data.contact_no }}</td>
                                    <td class="email">{{ data.email }}</td>
                                    <td class="age">{{ data.age }}</td>
                                    <td class="gender">{{ data.gender }}</td>
                                </tr>
                            {% endfor %}
                            </tbody>
                            <tfoot>
                            <tr>
                                <th rowspan="1" colspan="1">Device ID</th>
                                <th rowspan="1" colspan="1">Username</th>
                                <th rowspan="1" colspan="1">First Name</th>
                                <th rowspan="1" colspan="1">Last Name</th>
                                <th rowspan="1" colspan="1">Address</th>
                                <th rowspan="1" colspan="1">Contact No.</th>
                                <th rowspan="1" colspan="1">Email</th>
                                <th rowspan="1" colspan="1">Age</th>
                                <th rowspan="1" colspan="1">Gender</th>
                            </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block javascript %}

    <script>
            $(document).ready( function () {
            $('#dt-healthList').DataTable( {
                "bFilter": true
            } );
        } );
    </script>

    <script>
        $(document).ready(function(){
            $("#clientDetailsForm").submit(function(evt){
                evt.preventDefault();

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: "{% url 'client_report' %}",
                    data : {
                        'user_id': 'bibek',
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function(data){
                        if(data.success){
                            console.log("success");
                            $('#healthModal').modal('show');
                            document.getElementById("clientDetailsForm").reset();
                            $('#clientDetails').modal('hide');

                        }else{
                            console.log("not success")
                        }
                    },
                    error: function(xhr, desc, err){
                        console.log(err);
                    }
                });
            });
        });
    </script>

{% endblock %}